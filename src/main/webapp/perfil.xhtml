<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:jsf="http://xmlns.jcp.org/jsf"
	xmlns:html="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:c="http://java.sun.com/jsp/jstl/core">

<ui:composition template="_template.xhtml">
	<ui:define name="tituloPag"> Zebro - Perfil </ui:define>

	<ui:param name="perfil" value="active" />
	<ui:param name="count" value="#{perfilBean.count}" />
	<ui:param name="talkParam" value="true"/>
	<ui:param name="perfilCss" value="true"/>
	
	<ui:define name="conteudo">

	<script>

		var chat = new WebSocket("wss://zsocket.herokuapp.com");
		
		chat.onopen = function (event){
			console.log(event);
			var mensagem = {
					'type': 'enter',
					'idusuario':'#{perfilBean.usuario.idusuario}'
				}
			console.log(mensagem);
			chat.send(JSON.stringify(mensagem));
			setInterval(function() {
				chat.send(JSON.stringify("{ping:'ping'}"));
			},2000)
		}
	
		chat.onmessage = function (message){
			var jsonData = JSON.parse(message.data);
			console.log(jsonData);
			switch(jsonData.type){
				case "mensagem":
					var id;
					if (jsonData.fkusuario == #{perfilBean.usuario.idusuario}) {
						id = jsonData.idusuario;
					} else {
						id = jsonData.fkusuario;
					}
					
					changeOrderList([{name: 'data', value: id}]);
					
					insertIntoChatbox(jsonData);	
					
					var messageArea = $('.listChatBox');
					messageArea.scrollTop(messageArea.prop('scrollHeight'));
					
					break;
				case "sendRequest":
					plusCount();
					PF('messageCame').renderMessage({
						'summary': 'Solicitação Recebida',
						'severity': 'info'
					});	
					break;
				case "acceptRequest":
					PF('messageCame').renderMessage({
						'summary': jsonData.mensagem,
						'severity': 'info'
					});
					break;
			}
			
		}
		
		chat.onclose = function (event){
			console.log("Closed Chat" + event);
		}
		
		function envia(message){
			chat.send(message);
		}


		function showChatbox(){
			$("#chatbox").collapse('show');	
			$('.textMessage').focus();
		}
		
		function hideCollapse(){
			console.log("Escondendo collapse")
			$("#chatbox").collapse('hide');
		}
		
		$(function (){
			hideCollapse();
		})
		
		
	</script>
	
	<h:outputStylesheet library="bootstrap" name="theme.css"/>
	<div class="modal fade" id="modalTermos" tabindex="-1" role="dialog" aria-labelledby="modalTermos" aria-hidden="true">
	  <div class="modal-dialog modal-dialog-centered" role="document">
	    <div class="modal-content">
	      <div class="modal-header">
	        <h5 class="modal-title text-center" id="exampleModalLongTitle">Termos de Uso</h5>
	        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
	          <span aria-hidden="true">&times;</span>
	        </button>
	      </div>
	      <div class="modal-body">
	        <h3>VISÃO GERAL</h3>

			<p>Esse site é operado pelo Zebro . Em todo o site, os termos “nós”, “nos” e
			“nosso” se referem ao Zebro . O Zebro proporciona esse site, incluindo todas
			as informações, ferramentas e serviços disponíveis deste site para você, o
			usuário, com a condição da sua aceitação de todos os termos, condições,
			políticas e avisos declarados aqui.</p>
			
			<p>Ao visitar nosso site e/ou comprar alguma coisa no nosso site, você está
			utilizando nossos “Serviços”. Consequentemente, você concorda com os
			seguintes termos e condições (“Termos de serviço”, “Termos”), incluindo os
			termos e condições e políticas adicionais mencionados neste documento e/ou
			disponíveis por hyperlink. Esses Termos de serviço se aplicam a todos os
			usuários do site, incluindo, sem limitação, os usuários que são navegadores,
			fornecedores, clientes, lojistas e/ou contribuidores de conteúdo.</p>
			
			<p>Por favor, leia esses Termos de serviço cuidadosamente antes de acessar ou
			utilizar o nosso site. Ao acessar ou usar qualquer parte do site, você concorda
			com os Termos de serviço. Se você não concorda com todos os termos e
			condições desse acordo, então você não pode acessar o site ou usar quaisquer
			serviços. Se esses Termos de serviço são considerados uma oferta, a
			aceitação é expressamente limitada a esses Termos de serviço.</p>

			<p>Quaisquer novos recursos ou ferramentas que forem adicionados à loja atual
			também devem estar sujeitos aos Termos de serviço. Você pode revisar a</p>
			<p>versão mais atual dos Termos de serviço quando quiser nesta página.
			Reservamos o direito de atualizar, alterar ou trocar qualquer parte desses
			Termos de serviço ao publicar atualizações e/ou alterações no nosso site. É
			sua responsabilidade verificar as alterações feitas nesta página
			periodicamente. Seu uso contínuo ou acesso ao site após a publicação de
			quaisquer alterações constitui aceitação de tais alterações.</p>
			
			<p>Nossa loja é hospedada no Shopify Inc. Eles nos fornecem uma plataforma de
			e-commerce online que nos permite vender nossos produtos e serviços.</p>
			
			<h4>SEÇÃO 1 - TERMOS DA LOJA VIRTUAL</h4>
			
			<p>Ao concordar com os Termos de serviço, você confirma que você é maior de
			idade em seu estado ou província de residência e que você nos deu seu
			consentimento para permitir que qualquer um dos seus dependentes menores
			de idade usem esse site.</p>
			
			<p>Você não deve usar nossos produtos para qualquer fim ilegal ou não
			autorizado. Você também não pode, ao usufruir deste Serviço, violar quaisquer
			leis em sua jurisdição (incluindo, mas não limitado, a leis de direitos autorais).</p>
			
			<p>Você não deve transmitir nenhum vírus ou qualquer código de natureza
			destrutiva.</p>
			
			<p>Violar qualquer um dos Termos tem como consequência a rescisão imediata
			dos seus Serviços.</p>
			
			<h4>SEÇÃO 2 - CONDIÇÕES GERAIS</h4>
			
			<p>Reservamos o direito de recusar o serviço a qualquer pessoa por qualquer
			motivo a qualquer momento.</p>
			
			<p>Você entende que o seu conteúdo (não incluindo informações de cartão de
			crédito), pode ser transferido sem criptografia e pode: (a) ser transmitido por
			várias redes; e (b) sofrer alterações para se adaptar e se adequar às
			exigências técnicas de conexão de redes ou dispositivos. As informações de
			cartão de crédito sempre são criptografadas durante a transferência entre
			redes.</p>
			
			<p>Você concorda em não reproduzir, duplicar, copiar, vender, revender ou
			explorar qualquer parte do Serviço, uso do Serviço, acesso ao Serviço, ou
			qualquer contato no site através do qual o serviço é fornecido, sem nossa
			permissão expressa por escrito.</p>
			
			<p>Os títulos usados nesse acordo são incluídos apenas por conveniência e não
			limitam ou afetam os Termos.</p>
			
			<h4>SEÇÃO 3 - PRECISÃO, INTEGRIDADE E ATUALIZAÇÃO DAS
			INFORMAÇÕES</h4>
			
			<p>Não somos responsáveis por informações disponibilizadas nesse site que não
			sejam precisas, completas ou atuais. O material desse site é fornecido apenas
			para fins informativos e não deve ser usado como a única base para tomar 
			decisões sem consultar fontes de informações primárias, mais precisas, mais
			completas ou mais atuais. Qualquer utilização do material desse site é por sua
			conta e risco.</p>
			
			<p>Esse site pode conter certas informações históricas. As informações históricas
			podem não ser atuais e são fornecidas apenas para sua referência.
			Reservamos o direito de modificar o conteúdo desse site a qualquer momento,
			mas nós não temos obrigação de atualizar nenhuma informação em nosso site.
			Você concorda que é de sua responsabilidade monitorar alterações no nosso
			site.</p>
			
			<h4>SEÇÃO 4 - MODIFICAÇÕES DO SERVIÇO E PREÇOS</h4>
			
			<p>Os preços dos nossos produtos são sujeitos a alterações sem notificação.</p>
			
			<p>Reservamos o direito de, a qualquer momento, modificar ou descontinuar o
			Serviço (ou qualquer parte ou conteúdo do mesmo) sem notificação em
			qualquer momento.</p>
			
			<p>Não nos responsabilizados por você ou por qualquer terceiro por qualquer
			modificação, alteração de preço, suspensão ou descontinuação do Serviço.</p>
			
			<h4>SEÇÃO 5 - PRODUTOS OU SERVIÇOS (caso aplicável)</h4>
			
			<p>Certos produtos ou serviços podem estar disponíveis exclusivamente online
			através do site. Tais produtos ou serviços podem ter quantidades limitadas e
			são sujeitos a apenas devolução ou troca, de acordo com nossa Política de
			devolução.</p>
			
			<p>Fizemos todo o esforço possível da forma mais precisa as cores e imagens dos
			nossos produtos que aparecem na loja. Não podemos garantir que a exibição
			de qualquer cor no monitor do seu computador será precisa.</p>
			
			<p>Reservamos o direito, mas não somos obrigados, a limitar as vendas de
			nossos produtos ou Serviços para qualquer pessoa, região geográfica ou
			jurisdição. Podemos exercer esse direito conforme o caso. Reservamos o
			direito de limitar as quantidades de quaisquer produtos ou serviços que
			oferecemos. Todas as descrições de produtos ou preços de produtos são
			sujeitos a alteração a qualquer momento sem notificação, a nosso critério
			exclusivo. Reservamos o direito de descontinuar qualquer produto a qualquer
			momento. Qualquer oferta feita por qualquer produto ou serviço nesse site é
			nula onde for proibido por lei.</p>
			
			<p>Não garantimos que a qualidade de quaisquer produtos, serviços, informações
			ou outros materiais comprados ou obtidos por você vão atender às suas
			expectativas, ou que quaisquer erros no Serviço serão corrigidos.</p>
			
			<h4>SEÇÃO 6 - PRECISÃO DE INFORMAÇÕES DE FATURAMENTO E CONTA</h4>
			
			<p>Reservamos o direito de recusar qualquer pedido que você nos fizer. Podemos,
			a nosso próprio critério, limitar ou cancelar o número de produtos por pessoa,
			por domicílio ou por pedido. Tais restrições podem incluir pedidos feitos na</p>
			
			<p>mesma conta de cliente, no mesmo cartão de crédito, e/ou pedidos que usam a
			mesma fatura e/ou endereço de envio. Caso façamos alterações ou
			cancelemos um pedido, pode ser que o notifiquemos por e-mail e/ou
			endereço/número de telefone de faturamento fornecidos no momento que o
			pedido foi feito. Reservamos o direito de limitar ou proibir pedidos que, a nosso
			critério exclusivo, parecem ser feitos por comerciantes, revendedores ou
			distribuidores.</p>
			
			<p>Você concorda em fornecer suas informações de conta e compra completas
			para todas as compras feitas em nossa loja. Você concorda em atualizar
			prontamente sua conta e outras informações, incluindo seu e-mail, números de
			cartão de crédito e datas de validade, para que possamos completar suas
			transações e contatar você quando preciso.</p>
			
			<p>Para mais detalhes, por favor, revise nossa Política de devolução.</p>
			
			<h4>SEÇÃO 7 - FERRAMENTAS OPCIONAIS</h4>
			
			<p>Podemos te dar acesso a ferramentas de terceiros que não monitoramos e
			nem temos qualquer controle.</p>
			
			<p>Você reconhece e concorda que nós fornecemos acesso a tais ferramentas
			”como elas são” e “conforme a disponibilidade” sem quaisquer garantias,
			representações ou condições de qualquer tipo e sem qualquer endosso. Não
			nos responsabilizamos de forma alguma pelo seu uso de ferramentas opcionais
			de terceiros.</p>
			
			<p>Qualquer uso de ferramentas opcionais oferecidas através do site é
			inteiramente por sua conta e risco e você se familiarizar e aprovar os termos
			das ferramentas que são fornecidas por fornecedor(es) terceiro(s).</p>
			
			<p>Também podemos, futuramente, oferecer novos serviços e/ou recursos através
			do site (incluindo o lançamento de novas ferramentas e recursos). Tais
			recursos e/ou serviços novos também devem estar sujeitos a esses Termos de
			serviço.</p>
			
			<h4>SEÇÃO 8 - LINKS DE TERCEIROS</h4>
			
			<p>Certos produtos, conteúdos e serviços disponíveis pelo nosso Serviço podem
			incluir materiais de terceiros.</p>
			
			<p>Os links de terceiros nesse site podem te direcionar para sites de terceiros que
			não são afiliados a nós. Não nos responsabilizamos por examinar ou avaliar o
			conteúdo ou precisão. Não garantimos e nem temos obrigação ou
			responsabilidade por quaisquer materiais ou sites de terceiros, ou por
			quaisquer outros materiais, produtos ou serviços de terceiros.</p>
			
			<p>Não somos responsáveis por quaisquer danos ou prejuízos relacionados com a
			compra ou uso de mercadorias, serviços, recursos, conteúdo, ou quaisquer
			outras transações feitas em conexão com quaisquer sites de terceiros. Por
			favor, revise com cuidado as políticas e práticas de terceiros e certifique-se que
			você as entende antes de efetuar qualquer transação. As queixas,
			reclamações, preocupações ou questões relativas a produtos de terceiros
			devem ser direcionadas ao terceiro.</p>
			
			<h4>SEÇÃO 9 - COMENTÁRIOS, FEEDBACK, ETC. DO USUÁRIO</h4>
			
			<p>Se, a nosso pedido, você enviar certos itens específicos (por exemplo,
			participação em um concurso), ou sem um pedido nosso, você enviar ideias
			criativas, sugestões, propostas, planos, ou outros materiais, seja online, por e-
			mail, pelo correio, ou de outra forma (em conjunto chamados de &#39;comentários&#39;),
			você concorda que podemos, a qualquer momento, sem restrição, editar,
			copiar, publicar, distribuir, traduzir e de outra forma usar quaisquer comentários
			que você encaminhar para nós. Não nos responsabilizamos por: (1) manter
			quaisquer comentários em sigilo; (2) indenizar por quaisquer comentários; ou
			(3) responder quaisquer comentários.</p>
			
			<p>Podemos, mas não temos a obrigação, de monitorar, editar ou remover
			conteúdo que nós determinamos a nosso próprio critério ser contra a lei,
			ofensivo, ameaçador, calunioso, difamatório, pornográfico, obsceno ou
			censurável ou que viole a propriedade intelectual de terceiros ou estes Termos
			de serviço.</p>
			
			<p>Você concorda que seus comentários não violarão qualquer direito de terceiros,
			incluindo direitos autorais, marcas registradas, privacidade, personalidade ou
			outro direito pessoal ou de propriedade. Você concorda que os seus
			comentários não vão conter material difamatório, ilegal, abusivo ou obsceno.
			Eles também não conterão nenhum vírus de computador ou outro malware que
			possa afetar a operação do Serviço ou qualquer site relacionado. Você não
			pode usar um endereço de e-mail falso, fingir ser alguém diferente de si
			mesmo, ou de outra forma enganar a nós ou terceiros quanto à origem de
			quaisquer comentários. Você é o único responsável por quaisquer comentários
			que você faz e pela veracidade deles. Nós não assumimos qualquer
			responsabilidade ou obrigação por quaisquer comentários publicados por você
			ou por qualquer terceiro.</p>
			
			<h4>SEÇÃO 10 - INFORMAÇÕES PESSOAIS</h4>
			
			<p>O envio de suas informações pessoais através da loja é regido pela nossa
			Política de privacidade. Ver nossa Política de privacidade.</p>
			
			<h4>SEÇÃO 11 - ERROS, IMPRECISÕES E OMISSÕES</h4>
			
			<p>Ocasionalmente, pode haver informações no nosso site ou no Serviço que
			contém erros tipográficos, imprecisões ou omissões que possam relacionar-se
			a descrições de produtos, preços, promoções, ofertas, taxas de envio do
			produto, o prazo de envio e disponibilidade. Reservamos o direito de corrigir
			quaisquer erros, imprecisões ou omissões, e de alterar ou atualizar
			informações ou cancelar encomendas caso qualquer informação no Serviço ou
			em qualquer site relacionado seja imprecisa, a qualquer momento e sem aviso
			prévio (até mesmo depois de você ter enviado o seu pedido).</p>
			
			<p>Não assumimos nenhuma obrigação de atualizar, alterar ou esclarecer
			informações no Serviço ou em qualquer site relacionado, incluindo, sem
			limitação, a informações sobre preços, exceto conforme exigido por lei.
			Nenhuma atualização específica ou data de atualização no Serviço ou em
			qualquer site relacionado, deve ser utilizada para indicar que todas as
			informações do Serviço ou em qualquer site relacionado tenham sido
			modificadas ou atualizadas.</p>
			
			<h4>SEÇÃO 12 - USOS PROIBIDOS</h4>
			
			<p>Além de outras proibições, conforme estabelecido nos Termos de serviço, você
			está proibido de usar o site ou o conteúdo para: (a) fins ilícitos; (b) solicitar
			outras pessoas a realizar ou participar de quaisquer atos ilícitos; (c) violar
			quaisquer regulamentos internacionais, provinciais, estaduais ou federais,
			regras, leis ou regulamentos locais; (d) infringir ou violar nossos direitos de
			propriedade intelectual ou os direitos de propriedade intelectual de terceiros; (e)
			para assediar, abusar, insultar, danificar, difamar, caluniar, depreciar, intimidar
			ou discriminar com base em gênero, orientação sexual, religião, etnia, raça,
			idade, nacionalidade ou deficiência; (f) apresentar informações falsas ou
			enganosas; (g) fazer o envio ou transmitir vírus ou qualquer outro tipo de
			código malicioso que será ou poderá ser utilizado para afetar a funcionalidade
			ou operação do Serviço ou de qualquer site relacionado, outros sites, ou da
			Internet; (h) coletar ou rastrear as informações pessoais de outras pessoas; (i)
			para enviar spam, phishing, pharm, pretext, spider, crawl, ou scrape; (j) para
			fins obscenos ou imorais; ou (k) para interferir ou contornar os recursos de
			segurança do Serviço ou de qualquer site relacionado, outros sites, ou da
			Internet. Reservamos o direito de rescindir o seu uso do Serviço ou de qualquer
			site relacionado por violar qualquer um dos usos proibidos.</p>
			
			<h4>SEÇÃO 13 - ISENÇÃO DE RESPONSABILIDADE DE GARANTIAS;
			LIMITAÇÃO DE RESPONSABILIDADE</h4>
			
			<p>Nós não garantimos, representamos ou justificamos que o seu uso do nosso
			serviço será pontual, seguro, sem erros ou interrupções.</p>
			
			<p>Não garantimos que os resultados que possam ser obtidos pelo uso do serviço
			serão precisos ou confiáveis.</p>
			
			<p>Você concorda que de tempos em tempos, podemos remover o serviço por
			períodos indefinidos de tempo ou cancelar a qualquer momento, sem te
			notificar.</p>
			
			<p>Você concorda que o seu uso ou incapacidade de usar o serviço é por sua
			conta e risco. O serviço e todos os produtos e serviços entregues através do
			serviço são, exceto conforme declarado por nós) fornecidos sem garantia e
			conforme a disponibilidade para seu uso, sem qualquer representação,
			garantias ou condições de qualquer tipo, expressas ou implícitas, incluindo
			todas as garantias implícitas ou condições de comercialização, quantidade,
			adequação a uma finalidade específica, durabilidade, título, e não violação.</p>
			
			<p>Em nenhuma circunstância o Zebro , nossos diretores, oficiais, funcionários,
			afiliados, agentes, contratantes, estagiários, fornecedores, prestadores de
			serviços ou licenciadores serão responsáveis por qualquer prejuízo, perda,
			reclamação ou danos diretos, indiretos, incidentais, punitivos, especiais ou
			consequentes de qualquer tipo, incluindo, sem limitação, lucros cessantes,
			perda de receita, poupanças perdidas, perda de dados, custos de reposição, ou
			quaisquer danos semelhantes, seja com base em contrato, ato ilícito (incluindo
			negligência), responsabilidade objetiva ou de outra forma, decorrentes do seu
			uso de qualquer um dos serviços ou quaisquer produtos adquiridos usando o
			serviço, ou para qualquer outra reclamação relacionada de alguma forma ao
			seu uso do serviço ou qualquer produto, incluindo, mas não limitado a,
			quaisquer erros ou omissões em qualquer conteúdo, ou qualquer perda ou
			dano de qualquer tipo como resultado do uso do serviço ou qualquer conteúdo
			(ou produto) publicado, transmitido ou de outra forma disponível através do
			serviço, mesmo se alertado ​​de tal possibilidade. Como alguns estados ou
			jurisdições não permitem a exclusão ou a limitação de responsabilidade por
			danos consequentes ou incidentais, em tais estados ou jurisdições, a nossa
			responsabilidade será limitada à extensão máxima permitida por lei.</p>
			
			<h4>SEÇÃO 14 - INDENIZAÇÃO</h4>
			
			<p>Você concorda em indenizar, defender e isentar Zebro e nossos subsidiários,
			afiliados, parceiros, funcionários, diretores, agentes, contratados, licenciantes,
			prestadores de serviços, subcontratados, fornecedores, estagiários e
			funcionários, de qualquer reclamação ou demanda, incluindo honorários de
			advogados, por quaisquer terceiros devido à violação destes Termos de serviço
			ou aos documentos que incorporam por referência, ou à violação de qualquer
			lei ou os direitos de um terceiro.</p>
			
			<h4>SEÇÃO 15 - INDEPENDÊNCIA</h4>
			
			<p>No caso de qualquer disposição destes Termos de serviço ser considerada
			ilegal, nula ou ineficaz, tal disposição deve, contudo, ser aplicável até ao limite
			máximo permitido pela lei aplicável, e a porção inexequível será considerada
			separada desses Termos de serviço. Tal determinação não prejudica a
			validade e aplicabilidade de quaisquer outras disposições restantes.</p>
			
			<h4>SEÇÃO 16 - RESCISÃO</h4>
			
			<p>As obrigações e responsabilidades das partes incorridas antes da data de
			rescisão devem continuar após a rescisão deste acordo para todos os efeitos.</p>
			
			<p>Estes Termos de Serviço estão em vigor, a menos que seja rescindido por você
			ou por nós. Você pode rescindir estes Termos de serviço a qualquer momento,
			notificando-nos que já não deseja utilizar os nossos serviços, ou quando você
			deixar de usar o nosso site.</p>
			
			<p>Se em nosso critério exclusivo você não cumprir com qualquer termo ou
			disposição destes Termos de serviço, nós também podemos rescindir este
			contrato a qualquer momento sem aviso prévio e você ficará responsável por
			todas as quantias devidas até a data da rescisão; também podemos lhe negar
			acesso a nossos Serviços (ou qualquer parte deles).</p>
			
			<h4>SEÇÃO 17 - ACORDO INTEGRAL</h4>
			
			<p>Caso não exerçamos ou executemos qualquer direito ou disposição destes
			Termos de serviço, isso não constituirá uma renúncia de tal direito ou
			disposição.</p>
			
			<p>Estes Termos de serviço e quaisquer políticas ou normas operacionais
			postadas por nós neste site ou no que diz respeito ao serviço constituem a
			totalidade do acordo entre nós. Estes termos regem o seu uso do Serviço,
			substituindo quaisquer acordos anteriores ou contemporâneos, comunicações
			e propostas, sejam verbais ou escritos, entre você e nós (incluindo, mas não
			limitado a quaisquer versões anteriores dos Termos de serviço).</p>
			
			<p>Quaisquer ambiguidades na interpretação destes Termos de serviço não
			devem ser interpretadas contra a parte que os redigiu.</p>
			
			<h4>SEÇÃO 18 - LEGISLAÇÃO APLICÁVEL</h4>
			
			<p>Esses Termos de serviço e quaisquer acordos separados em que nós lhe
			fornecemos os Serviços devem ser regidos e interpretados de acordo com as
			leis de Av. ribeirão branco, ITAQUAQUECETUBA, SP, 08588-450, Brazil.</p>
			
			<h4>SEÇÃO 19 - ALTERAÇÕES DOS TERMOS DE SERVIÇO</h4>
			
			<p>Você pode rever a versão mais atual dos Termos de serviço a qualquer
			momento nessa página.</p>
			
			<p>Reservamos o direito, a nosso critério, de atualizar, modificar ou substituir
			qualquer parte destes Termos de serviço ao publicar atualizações e alterações
			no nosso site. É sua responsabilidade verificar nosso site periodicamente. Seu
			uso contínuo ou acesso ao nosso site ou ao Serviço após a publicação de
			quaisquer alterações a estes Termos de serviço constitui aceitação dessas
			alterações.</p>
			
			<h4>SEÇÃO 20 - INFORMAÇÕES DE CONTATO</h4>
			
			<p>As perguntas sobre os Termos de serviço devem ser enviadas para nós
			através do caiohiqueabrao@gmail.com.</p>
	      </div>
	  
	    </div>
	  </div>
	</div>
	<h:form styleClass="ui-g telaRelativa" enctype="multipart/form-data">
		<p:growl widgetVar="messageCame" life="3000"/>
		<p:remoteCommand name="plusCount" actionListener="#{perfilBean.plusCount()}" update="@form"/>
		<p:remoteCommand actionListener="#{perfilBean.chatboxFirst()}"
					name="chatboxFirst" update="stackFriends @form:chatbox:dataListMessages 
					@form:chatbox:headerChatbox @form:chatbox:scripts" />
		<p:remoteCommand name="changeOrderList" actionListener="#{perfilBean.changeOrderList()}" 
					update="stackFriends"/>
		
		<div class="blocoPerfil ui-g-3 ui-md-3 d-flex flex-column justify-content-around">
			<div class="text-center container d-flex flex-column">

				<h2>#{perfilBean.usuario.nome}</h2>
				<p:outputLabel for="uploadPrimaryPhoto" style="cursor: pointer">
					<h:graphicImage url="#{perfilBean.usuario.fotousuario}"
						styleClass="imageView" />
				</p:outputLabel>
			</div>

			<p:selectBooleanButton value="#{perfilBean.updateImages}" onLabel="Fotos" offLabel="Perfil" style="width:60px; position: absolute;">
	            <p:ajax update="opcoes"/>
	        </p:selectBooleanButton>

			<h:panelGroup styleClass="opcoes" id="opcoes" layout="block">
			
				<h:panelGroup class="container d-flex flex-column justify-content-around" layout="block" rendered="#{perfilBean.updateImages == true}">
					<div class="d-flex flex-row justify-content-around container">
						<button jsf:styleClass="custom btnOpcao buttonWhite" 
								data-toggle="tooltip" jsf:process="@this" data-placement="top"
								title="Dados de Usuário"
								jsf:action="#{perfilBean.setWanderlei(true)}" jsf:update="dataUser">
							<i class="fa fa-user fa-3x"></i>
						</button>
						<button jsf:styleClass="btnOpcao buttonBlack reajusteIcon"
								jsf:process="@this" style="color: #FFF" jsf:update="dataUser"
								title="Gerenciamento de Amizades"
								jsf:action="#{perfilBean.setWanderlei(false)}" >
							<i class="fa fa-users fa-3x"></i>
						</button>
					</div>

					<div class="d-flex flex-row justify-content-around container"
						style="margin-top: 1.5rem;">
						<button jsf:styleClass="btnOpcao buttonBlack reajusteIcon" type="button"
							title="Termos de Uso" data-toggle="modal" data-target="#modalTermos" style="color: #FFF">
							<i class="fa fa-book fa-3x"></i>
						</button>
						<button jsf:styleClass="btnOpcao buttonWhite"
							title="Sair/Deslogar" jsf:action="#{perfilBean.logoff()}">
							<i class="fa fa-sign-out fa-3x"></i>
						</button>
					</div>
				</h:panelGroup>
				
				<h:panelGrid columns="2" columnClasses="ui-g-6,ui-g-6" rowClasses="ui-g" styleClass="width100"
						id="labelFotos" rendered="#{perfilBean.updateImages == false}">
						
					<p:outputLabel styleClass="photoUploadLabel photoLabelSec float-right" value="+" for="@form:dataUser:uploadSecondaryPhoto" 
						style="background-image: url(#{perfilBean.usuario.fotosecundaria});" id="secundaryP">
						<p:contextMenu for="secundaryP" styleClass="contextMenu">
							<p:menuitem value="Apagar"  update="@form" actionListener="#{perfilBean.removePhoto(0)}" onclick="removeSec()"/>
						</p:contextMenu>
					</p:outputLabel>
					
					<p:outputLabel styleClass="photoUploadLabel photoLabelTer float-right" value="+" for="@form:dataUser:uploadTerciaryPhoto"
						style="background-image: url(#{perfilBean.usuario.fototerciaria}); background-size:cover;" id="terciaryP">
						
						<p:contextMenu for="terciaryP" styleClass="contextMenu">
							<p:menuitem value="Apagar" actionListener="#{perfilBean.removePhoto(1)}" onclick="removeTer()" update="@form"/>
						</p:contextMenu>
					</p:outputLabel>
					
					<p:outputLabel styleClass="photoUploadLabel photoLabelQuat float-right" value="+" for="@form:dataUser:uploadQuaternaryPhoto"
						style="background-image: url(#{perfilBean.usuario.fotoquaternaria})" id="quatP">
						
						<p:contextMenu for="quatP" styleClass="contextMenu">
							<p:menuitem value="Apagar" actionListener="#{perfilBean.removePhoto(2)}" onclick="removeQua()" update="@form"/>
						</p:contextMenu>
						
					</p:outputLabel>
					
					<p:outputLabel styleClass="photoUploadLabel photoLabelFive float-right" value="+" for="@form:dataUser:uploadFifthPhoto"
						style="background-image: url(#{perfilBean.usuario.fotoquintenaria})" id="quinP">
						
						<p:contextMenu for="quinP" styleClass="contextMenu">
							<p:menuitem value="Apagar" actionListener="#{perfilBean.removePhoto(3)}" onclick="removeQui()" update="@form"/>
						</p:contextMenu>
						
					</p:outputLabel>
					
				</h:panelGrid>
				
			</h:panelGroup>
		</div>
		<h:panelGroup styleClass="ui-g-9" id="dataUser">

			<h:panelGroup id="modalData">

				<div class="modal fade" id="profileModal" tabindex="-1"
					role="dialog" aria-labelledby="profileModal" aria-hidden="true"
					style="color: #000;">
					<div class="modal-dialog" role="document">
						<div class="modal-content">
							<h:panelGroup layout="block" styleClass="modal-header" id="modalHeader">
								<h3 class="modal-title text-center" id="exampleModalLabel">#{perfilBean.selectedUsuario.nome},
									#{perfilBean.selectedUsuario.idade}</h3>
								<button type="button" class="close" data-dismiss="modal"
									aria-label="Close">
									<span aria-hidden="true">&times;</span>
								</button>
							</h:panelGroup>
							<h:panelGroup styleClass="modal-body width100 d-flex flex-column" id="modalBody">

								<div class="d-flex flex-row ui-g">

									<div class="ui-g-4">
										<div
											class="container d-flex flex-column justify-content-around">
											<p:repeat var="artist"
												value="#{perfilBean.artistsSelectedUsuario}">
												<div class="container ui-g align-items-center">
													<h:graphicImage url="#{artist.getImages()[0].getUrl()}"
														styleClass="imageArtist ui-g-4" />

													<h4 class="ui-g-8 text-center">#{artist.name}</h4>
												</div>
											</p:repeat>
										</div>
									</div>

									<div class="ui-g-4">
										<div id="photoCarousel" class="carousel slide height100 width100" data-ride="carousel">
													<ol class="carousel-indicators">
														<li data-target="#photoCarousel" data-slide-to="0" class="active"></li>
														<li data-target="#photoCarousel" data-slide-to="1" jsf:rendered="#{perfilBean.selectedUsuario.fotosecundaria.isEmpty() == false}"></li>
														<li data-target="#photoCarousel" data-slide-to="2" jsf:rendered="#{perfilBean.selectedUsuario.fototerciaria.isEmpty() == false}"></li>
														<li data-target="#photoCarousel" data-slide-to="3" jsf:rendered="#{perfilBean.selectedUsuario.fotoquaternaria.isEmpty() == false}"></li>
														<li data-target="#photoCarousel" data-slide-to="4" jsf:rendered="#{perfilBean.selectedUsuario.fotoquintenaria.isEmpty() == false}"></li>
													</ol>
													<div class="carousel-inner">
															
														<div class="carousel-item active">
															<h:graphicImage url="#{perfilBean.selectedUsuario.fotousuario}" styleClass="d-block w-100"
																style="border: .1em solid black; height: 380px;"/>
														</div>
														<div class="carousel-item" jsf:rendered="#{perfilBean.selectedUsuario.fotosecundaria.isEmpty() == false}">
															<h:graphicImage url="#{perfilBean.selectedUsuario.fotosecundaria}" styleClass="d-block w-100"
																style="border: .1em solid black; height: 380px;"/>
														</div>
														<div class="carousel-item" jsf:rendered="#{perfilBean.selectedUsuario.fototerciaria.isEmpty() == false}">
															<h:graphicImage url="#{perfilBean.selectedUsuario.fototerciaria}" styleClass="d-block w-100"
																style="border: .1em solid black; height: 380px;"/>
														</div>
														<div class="carousel-item" jsf:rendered="#{perfilBean.selectedUsuario.fotoquaternaria.isEmpty() == false}">
															<h:graphicImage url="#{perfilBean.selectedUsuario.fotoquaternaria}" styleClass="d-block w-100"
																style="border: .1em solid black; height: 380px;"/>
														</div>
														<div class="carousel-item" jsf:rendered="#{perfilBean.selectedUsuario.fotoquintenaria.isEmpty() == false}">
															<h:graphicImage url="#{perfilBean.selectedUsuario.fotoquintenaria}" styleClass="d-block w-100"
																style="border: .1em solid black; height: 380px;"/>
														</div>
														
														<a class="carousel-control-prev" href="#photoCarousel" role="button" data-slide="prev">
														    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
														    <span class="sr-only">Previous</span>
														  </a>
														  <a class="carousel-control-next" href="#photoCarousel" role="button" data-slide="next">
														    <span class="carousel-control-next-icon" aria-hidden="true"></span>
														    <span class="sr-only">Next</span>
														  </a>
														
													</div>
  
												</div>

									</div>

									<div class="ui-g-4">
										<div class="height100 width100 d-flex flex-column">
											<div class="container text-center">
												<h4>Música Favorita:</h4>
												<h:graphicImage
													url="#{perfilBean.musicSelectedUsuario.album.images[0].url}"
													styleClass="imageMusic" />
												<button onclick="playMusic()" class="playButton">
													<i class="fa fa-play"></i>
												</button>
												<audio id="audio">
													<source src="#{perfilBean.musicSelectedUsuario.getPreviewUrl()}" type="audio/mp3" id="audiosource"/>
												</audio>
												<h:outputScript library="js" name="musicPreview.js"/>
												<h6 style="margin: .5rem 0">#{perfilBean.musicSelectedUsuario.name} -
													#{perfilBean.musicSelectedUsuario.artists[0].name}</h6>
												<div class="text-center">
													<h:outputText
														value="#{perfilBean.musicSelectedUsuario.album.name}"
														styleClass="text-center" />
												</div>
											</div>
											<div class="container" style="word-wrap: break-word;">
												<hr class="width100" />
												<h:outputText value="#{perfilBean.selectedUsuario.desc}" />
											</div>
											<div></div>
										</div>
									</div>

								</div>

							</h:panelGroup>
						</div>
					</div>
				</div>
			</h:panelGroup>

			<h:panelGrid layout="block" columns="1" cellspacing="8"
				styleClass="width100" rendered="#{perfilBean.wanderlei}">

				<h3 class="text-center">Atualize seus dados</h3>

				<p:fileUpload id="uploadPrimaryPhoto" mode="simple" accept="image/*" style="display: none;"
					value="#{perfilBean.priImage}" html:onchange="previewPrimary()"/>
				<p:fileUpload id="uploadSecondaryPhoto" mode="simple" accept="image/*" style="display: none;"
					value="#{perfilBean.secImage}" html:onchange="previewSecondary()"/>
				<p:fileUpload id="uploadTerciaryPhoto" mode="simple" accept="image/*" style="display: none;"
				 	value="#{perfilBean.terImage}" html:onchange="previewTerciary()"/>
				<p:fileUpload id="uploadQuaternaryPhoto" mode="simple" accept="image/*" style="display: none;"
					value="#{perfilBean.quatImage}" html:onchange="previewQuaternary()"/>
				<p:fileUpload id="uploadFifthPhoto" mode="simple" accept="image/*" style="display: none;"
					value="#{perfilBean.quinImage}" html:onchange="previewFifth()"/>

				<h:outputLabel value="Nome: " for="nome" />
				<p:inputText value="#{perfilBean.usuario.nome}"
					styleClass="form-control" id="nome"
					placeholder="Digite seu nome..." />

				<p:outputLabel value="Selecione sua música favorita: "
					for="autocomplete" />
				<p:autoComplete value="#{perfilBean.track}" id="autocomplete"
					forceSelection="true" completeMethod="#{perfilBean.completeMusic}"
					var="music" inputStyleClass="form-control empty"
					styleClass="width100"
					itemLabel="#{music.name} - #{music.getAlbum().getArtists()[0].getName()}"
					panelStyleClass="text-center" itemValue="#{music}"
					emptyMessage="Musica não encontrada"
					placeholder="Procure aqui sua música favorita">
					<f:converter converterId="trackConverter" />
					<p:column>
						<h:graphicImage styleClass="imageIcon"
							url="#{music.getAlbum().getImages()[0].getUrl()}" />
					</p:column>
					<p:column>
						<h:outputText
							value="#{music.name} - #{music.getAlbum().getArtists()[0].getName()}" />
					</p:column>
				</p:autoComplete>
				
				<p:outputLabel for="artistas" value="Selecione seus artistas favoritos: (Deixe vazio para continuar com os mesmo artistas)"/>

				<p:autoComplete id="artistas" value="#{perfilBean.checkedArtists}" multiple="true"
						panelStyleClass="text-center" emptyMessage="Artista não encontrada"
						completeMethod="#{perfilBean.completeArtists}" inputStyleClass="form-control"
						styleClass="width100" var="artist" itemLabel="#{artist.name}" itemValue="#{artist}"  
						scrollHeight="150" >
					<p:column>
						<h:graphicImage url="#{artist.getImages()[0].getUrl()}" styleClass="imageIcon"/>
					</p:column>
					<p:column>
				 		<h:outputText value="#{artist.name}"/>
				 	</p:column>
				 	<f:converter converterId="artistConverter"/>
				</p:autoComplete>
			
				<h:panelGroup styleClass="text-right" style="margin: .1rem 0;font-style: italic;" layout="block">
					<h:outputText value="Artistas favoritos: "/>
					<c:forEach items="#{perfilBean.usuarioArtists}" var="a">
						<h:outputText value="#{a.name} . "/>
					</c:forEach>
				</h:panelGroup>
												
				<p:outputLabel for="desc" value="Descrição: " />
				<p:inputTextarea value="#{perfilBean.usuario.desc}" rows="2"
					styleClass="form-control" id="desc"
					placeholder="Coloque aqui uma descrição sua.."
					style="resize: none;" />
				
				<br />
				
				<h:panelGroup layout="block" styleClass="d-flex flex-row justify-content-between">
					<p:commandButton value="Atualizar" ajax="false"
						action="#{perfilBean.updateUserData}"
						styleClass="btn btn-dark" />
						
					<p:commandLink value="Apagar conta" action="#{perfilBean.deleteAccount()}" styleClass="btn btn-dark" update="@form">
		    			<p:confirm header="Deletar conta" message="Pô, tem certeza que quer ir embora? Vamos sentir sua falta."
		    				icon="ui-icon-alert"/>
		    		</p:commandLink>
		    		<p:confirmDialog global="true" showEffect="fade" hideEffect="fade" style="background-color: #FFF">
				        <p:commandButton value="Sim" type="button" styleClass="ui-confirmdialog-yes btn btn-outline-dark" 
				        		 icon="ui-icon-check" update="@form"/>
				        <p:commandButton value="Não" type="button" styleClass="ui-confirmdialog-no btn btn-outline-dark" icon="ui-icon-close" />
				    </p:confirmDialog>
				</h:panelGroup>

			</h:panelGrid>

			<p:outputPanel autoUpdate="true" layout="block" rendered="#{!perfilBean.wanderlei}"
				id="friendsData" >
				<div class="container height100">

					<p:dataScroller value="#{perfilBean.solicitacoes}" var="u" rows="4" styleClass="scrollerData" 
						rendered="#{perfilBean.solicitacoes.size() != 0}">
						<f:facet name="header">
					 			<h3 style="margin-left: 3rem;" class="text-left">Solicitações pendentes</h3>
				 		</f:facet>
					 	
					 		<p:commandLink action="#{perfilBean.setSelectedUsuario(u)}" styleClass="linkModal"
					 			update="@form:modalData:modalHeader @form:modalData:modalBody">				 		
								<h:panelGrid columns="2" styleClass="width100"
									columnClasses="ui-g-1, ui-g-11" rowClasses="ui-g">
									<h:graphicImage
										url="#{u.fotousuario}" styleClass="imageIcon" />
		
									<h:panelGroup
										styleClass="d-flex flex-row justify-content-between">
										<h3 data-target="#profileModal" data-toggle="modal">#{u.nome}</h3>
										<div>
											<p:commandButton styleClass="btn btn-dark" value="Ignorar" 
												action="#{perfilBean.changeRequestStatus(2,u)}" update="@form"/>
											<p:commandButton styleClass="btn btn-dark" action="#{perfilBean.changeRequestStatus(1,u)}"
												update="@form" value="Aceitar" oncomplete="acceptRequest()" />
										</div>
									</h:panelGroup>
									
								</h:panelGrid>
							</p:commandLink>
							<script>
								function acceptRequest(){
									var message = {
										type: 'acceptRequest',
										mensagem: '#{perfilBean.usuario.nome} aceitou sua solicitação', 
										fkusuario: '#{u.idusuario}'
									}
									console.log("aaa");
									envia(JSON.stringify(message));
								}
								
								
							</script>
					</p:dataScroller>


					<p:dataScroller value="#{perfilBean.amigos}" var="u" rows="10" 
						id="dataScroller" styleClass="scrollerData">
						<f:facet name="header">
								<h3 class="text-left" style="margin-left: 3rem;">Suas amizades</h3>
							</f:facet>
						<h:panelGrid columns="2" styleClass="width100"
							columnClasses="ui-g-1, ui-g-11" rowClasses="ui-g align-items-center">
							
							<p:link value="Você ainda não fez amigos, clique aqui e comece a conhecer pessoas" outcome="busca.xhtml" 
									rendered="#{perfilBean.amigos.size() == 0}"  style="color: #000; text-decoration: none;"/>
							
							<h:graphicImage
								url="#{u.fotousuario}"
								styleClass="imageIcon" />

							<h:panelGroup layout="block"
								styleClass="d-flex flex-row justify-content-between">
								<h5>#{u.nome}</h5>
								<div class="d-flex flex-row">
									<div class="dropdown show">
									  <a class="btn btn-outline-dark dropdown-toggle" href="#" role="button" id="dropdownMenuLink" 
									  		data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
									    Opções
									  </a>
									
									  <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
									  	<div data-toggle="modal" data-target="#profileModal" class="dropdown-item">
										    <p:commandLink action="#{perfilBean.setSelectedUsuario(u)}" style="color: #000;"
										    	update="@form:modalData:modalHeader @form:modalData:modalBody" value="Ver pefil"/>
									  	</div>
									  	
									    <p:commandLink value="Apagar amizade" action="#{perfilBean.removeFriend(u)}" styleClass="dropdown-item" update="@form">
							    			<p:confirm header="Apagar amizade" message="Tem certeza que deseja apagar #{u.nome} da sua lista de amigos?"
							    				icon="ui-icon-alert"/>
							    		</p:commandLink>
							    		<p:confirmDialog global="true" showEffect="fade" hideEffect="fade" style="background-color: #FFF">
									        <p:commandButton value="Sim" type="button" styleClass="ui-confirmdialog-yes btn btn-outline-dark" 
									        		 icon="ui-icon-check" update="@form"/>
									        <p:commandButton value="Não" type="button" styleClass="ui-confirmdialog-no btn btn-outline-dark" icon="ui-icon-close" />
									    </p:confirmDialog>
									  </div>
									</div>

								</div>
							</h:panelGroup>
						</h:panelGrid>

					</p:dataScroller>
				</div>
			</p:outputPanel>
		</h:panelGroup>
		
		<h:panelGroup id="chatbox" layout="block">
						<div id="chatbox" class="col-sm-3 col-sm-offset-4 frame chatbox collapse">
						<h:panelGroup styleClass="text-center headerChatbox" layout="block" id="headerChatbox">
							<h5>#{perfilBean.usuarioChat.nome}</h5>
							<button type="button" class="close" onclick="hideCollapse()" aria-label="Close">
					          <span aria-hidden="true">&times;</span>
					        </button>
				        </h:panelGroup>
						<hr style="background-color: #FFF;" />
						<h:panelGroup id="dataListMessages" layout="block" style="height: 200px;">
							<ul class="listChatBox" >
								<p:dataList value="#{perfilBean.friendsMessage}" var="message"> 
									<h:panelGroup style="width: 100%;"
											rendered="#{message.fkusuariosend == perfilBean.usuarioChat.idusuario}">
										<div class="msj-rta macro">
												<div class="text text-r">
													<p>#{message.msgText}</p>
													<p>
														<small>#{message.msgData}</small>
													</p>
												</div>
												<div class="avatar"
													style="padding: 0px 0px 0px 10px !important">
													<img class="chatboxIcon" style="width: 100%;"
														src="#{perfilBean.usuario.fotousuario}" />
												</div>
											</div>
									</h:panelGroup>
									
									<h:panelGroup style="width: 100%;"
											rendered="#{message.fkusuariosend != perfilBean.usuarioChat.idusuario}">
										<div class="msj macro">
											<div class="avatar">
												<img class="chatboxIcon" style="width: 100%;"
													src="#{perfilBean.usuarioChat.fotousuario}" />
											</div>
											<div class="text text-l">
												<p>#{message.msgText}</p>
												<p>
													<small>#{message.msgData}</small>
												</p>

											</div>
										</div>
									</h:panelGroup>
								
								</p:dataList>
						
							</ul>
						</h:panelGroup>
							
							<div class="formDiv">
								<div class="msj-rta macro text-center" style="width: 95%;margin-right: .45em;">
									<div class="text text-r width100">
										<p:inputText styleClass="mytext textMessage"
											placeholder="Digite sua mensagem" onkeypress="enterPress(event)"/>
									</div>

								</div>
								<div class="buttonDivChatBox">
									<p:commandButton icon="fa fa-send" styleClass="btn btn-link btnSendMessage" type="submit"
										onclick="sendMessage()" async="true"/>
								</div>
							</div>
						</div>
						<h:panelGroup id="scripts">
							<script>
							
								function enterPress(e){
									var code = (e.keyCode ? e.keyCode : e.which);
									if(code == 13) { 
										e.preventDefault();
									 	sendMessage();
									}
								}
							
								function sendMessage(){
									console.log(#{perfilBean.usuarioChat.idusuario})
									
									event.preventDefault();
									var msgCome = document.querySelector(".textMessage");
									var mensagem = 
										{
											msgtexto: msgCome.value,
											type: "mensagem",
											fkusuario: '#{perfilBean.usuarioChat.idusuario}',
											fkcontato: '#{perfilBean.usuarioChat.idcontato}',
											idusuario: '#{perfilBean.usuario.idusuario}',
											nomeusuario: '#{perfilBean.usuario.nome}'
										}
									
									$.when(envia(JSON.stringify(mensagem)))
									.done(function() {
										msgCome.value = "";
									})
								}
								
								function insertIntoChatbox(jsonData) {
									
									var chatbox = $("#chatbox");
									
									if(chatbox.is(":visible")){
										
										if (#{perfilBean.usuarioChat.idcontato} == jsonData.fkcontato) {
											
											if (jsonData.fkusuario == #{perfilBean.usuario.idusuario}){
										        
												control = '<li style="width:95%">' +
										                        '<div class="msj macro">' +
										                        '<div class="avatar"><img class="chatboxIcon" style="width:100%;" src="#{perfilBean.usuarioChat.fotousuario}"/></div>' +
										                            '<div class="text text-l">' +
										                                '<p>'+ jsonData.msgtexto +'</p>' +
										                                '<p><small>'+jsonData.msgdata+'</small></p>' +
										                            '</div>' +
										                        '</div>' +
										                        
										                    '</li>';    
										                    
											}else{
										    
												control = '<li style="width:95%;">' +
										                        '<div class="msj-rta macro">' +
										                            '<div class="text text-r">' +
										                                '<p>'+jsonData.msgtexto+'</p>' +
										                                '<p><small>'+jsonData.msgdata+'</small></p>' +
										                            '</div>' +
											                        '<div class="avatar" style="padding:0px 0px 0px 10px !important"><img class="chatboxIcon" style="width:100%;" src="#{perfilBean.usuario.fotousuario}" /></div>' +                                
									                            '</div>' +
										                  '</li>';
		
										    }
											
											var messageArea = $(".listChatBox");
											messageArea.append(control).scrollTop(messageArea.prop('scrollHeight'));
										
										}else{
											
											PF('messageCame').renderMessage({
												'summary': jsonData.nomeusuario + ' diz: ',
												'detail' : jsonData.msgtexto,
												'severity': 'info'
											});
											
										}
									
									}else{
										
										$.when(chatboxFirst()).done(function (){
											showChatbox();		
											setTimeout(function () {
												
											var messageArea = $(".listChatBox");
											
												control = '<li style="width:95%">' +
							                        '<div class="msj macro">' +
							                        '<div class="avatar"><img class="chatboxIcon" style="width:100%;" src="#{buscaBean.usuarioChat.fotousuario}"/></div>' +
							                            '<div class="text text-l">' +
							                                '<p>'+ jsonData.msgtexto +'</p>' +
							                                '<p><small>'+jsonData.msgdata+'</small></p>' +
							                            '</div>' +
							                        '</div>' +
							                        
							                    '</li>';
							                    
							                    console.log(control)
												messageArea.append(control)
												messageArea.scrollTop(messageArea.prop('scrollHeight'));
											}, 1000)
						                    
										})
									}
									
								}
							</script>	
							<h:outputScript library="js" name="scroller.js" />
						</h:panelGroup>
							
					</h:panelGroup>
				
		
				<p:stack icon="/resources/img/icons/messageIcon.png" id="stackFriends">
					<c:forEach items="#{perfilBean.lastFriends}" var="user" begin="0"
						end="4">
						<p:menuitem value="#{user.principalName}" styleClass="menuitem" ajax="true" async="true"
							onclick="showChatbox() " action="#{perfilBean.setUsuarioChat(user)}" 
							icon="#{user.fotousuario}" update="@form:chatbox:dataListMessages @form:chatbox:headerChatbox @form:chatbox:scripts"/>
					</c:forEach>
				</p:stack>

	</h:form>


	<h:outputScript library="js" name="scroller.js"/>
	<h:outputScript library="js" name="photoPreview.js"/>

	</ui:define>
</ui:composition>
</html>
